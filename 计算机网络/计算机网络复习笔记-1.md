# 计算机网络复习笔记

## 网络层

1. 理解转发和路由的区别
2. 网络层除了转发和路由，还有某些计网中，有连接建立功能，（如ATM, 帧中继, MPLS）
3. 虚电路(Virtual-Circuit) vc网络，数据包网络。
4. 因特网是一个数据报网络，但是许多其他网络体系结构是虚电路网络（ATM，帧中继）
5. 虚电路存在建立和拆除，建立期间，可以预留资源（如带宽）。拆除不仅要通知另一侧的端系统结束呼叫，还要更新路径上每台分组路由器中的转发表以表明该虚电路不存在了。
6. 转发表， 最长前缀匹配规则
7. 路由器是三层的交换机，还有在链路层交换机。
8. 数据包网络中的转发表是通过路有选择算法进行修改的，通常1-5min更新一次转发表。
9. 路由器体系结构包含4个组成部分：输入端口，输出端口，交换结构，路由选择处理器。输入端口还要完成查找功能，通过查找转发表决定路由器输出端口，输入端口一本有转发表的一份影子副本，转发决策无需中央路由选择处理器，比例集中式处理瓶颈。除此之外，输入端口还会出现对链路层和物理层的处理；检查分组的版本号，校验和和寿命字段，并重写后两个；还需要更新用于网络管理的计数器（如ip数据报的数目）
10. 路由选择处理器除了执行路由选择协议，维护路由选择表以及连接的链路状态信息，并为路由器计算转发表。还执行网络管理功能，具体是什么？
11. 网络地址转换也会在转发前对其端口进行重写。
12. 交换结构分为3中：1.经内存交换；（共享总线通识课一次只能执行一个内存读/写）2. 经总线交换；（加一个交换机内部标签，指示本地输出端口。每个端口都能收到，但只有匹配的端口会保存该分组，然后标签在输出端口去除） 3. 经互联网络交换。（某一时刻给定总线只有一个分组能发送，如果两个分组总线没有交叉，可以并行转发。）
13. 排队会发生在路由器哪些位置？
    - 输入； 输出； 交换队列。

14. 数据包格式：[资料源: IPV4 报文格式](https://blog.csdn.net/weixin_38280090/article/details/81171791)

    ![img](https://iknow-pic.cdn.bcebos.com/b219ebc4b74543a95b6dd54615178a82b80114c1?x-bce-process=image/resize,m_lfit,w_600,h_800,limit_1)

    

15. 首部校验和的计算方式，为什么在ip和传输层（的TCP， UDP）都执行差错检测？
16. 遇到ip数据报超出链路的MTU， 这时路由器会对ip数据报进行分片，分成多个片(fragment)。为什么ipv6要去掉这种方式，以及去掉之后如何解决类似的问题？
17. 使用片偏移而不使用类似序列号的原因，似乎是因为如果是序列号，在一次分片之后，遇到下一个路由器，发现MTU更小，之前分片的片也不能通过时，会进行二次分片，这时片偏移可以在原基础上实现让多次分片透明。
18. 片偏移是8字节块为个数的数据偏移，计算发现，片偏移13位，2^13 * 8字节 = 65536字节（也是ipv4的数据报的理论最大长度，超出就可能出现片偏移不够用而遇到上面的问题时，无法分片。）

18. ipv4的工作者决定是将数据报重新组装工作放到端系统，而不是网络路由器中。

19. 英特网的地址分配策略被称为无类别域间路由选择(CIDR), cidr将子网寻址一般化了，原先的是分类编址，ABC 8 16 24寻址

20. IP广播地址是255.255.255.255，链路层广播到所有与该子网连接的子网，广播的原理和细节？

21. 动态主机配置协议的细节流程？ 哪4个步骤？通信中，具体有哪些字段？

    - DHCP服务器发现；DHCP服务器提供；DHCP请求；DHCP ACK。

22. DHCP如何获知主机的加入和离开，是否会出现相同ip，原因和解决办法？

    - 有ip租用期，并且可以更新对ip的租用。（如果ip满了，是否会测试解除部分还在租用期但不响应的节点d的ip租用？）

23. DHCP中继的含义和作用？

24. 0.0.0.0和127.0.0.1在原理上的差异？

25.  移动节点如何实现单一永久地址的？（关键是这个以及DHCP配置ip，如何调整路由表的？）

26. 连接反转和tcp分岔是同一个东西么？

27. UPnP。为什么有NAT不能直接建立TCP连接？似乎是不能响应SYN报文？

28. SSL如何实现加密的？秘钥如何传递？

29. internet控制报文协议 （ICMP）。ping的请求和回答其实都是ICMP协议实现的，大多数OS原生支持，不需要单独进程。ICMP报文内容：一个类型字段；一个编码字段。

30. ICMP是源抑制报文，这一点是否有具体作用？4 0 是源抑制。具体？

31. IPV6

    ![webwxgetmsgimg](C:\Users\Magicbook\Desktop\缓存桌面\webwxgetmsgimg.jpg)

32. 地址容量： 32 -> 128bit. 引入任播地址，含义作用？
33. 首部40字节，其中32字节都是源/目的地址ip。
34. 流量类型字段（8bit），类似ipv4的TOS，可用于给出一个流中某些数据报的优先级。（那么TOS也是如何实现的？）
35. 流标签（20bit）如何发挥作用？
36. 有效载荷长度（16bit） 理论仍是65536字节。在定长的40字节之后的数据报首部后面的字节数量。
37. 下一个首部其实类似ipv4的上层协议，是依次的下一个报文的协议。（确认一下ipv4也是这种逻辑么？）
38. 因特网组管理协议（IGMP）用于管理主机加入和离开多播组。（多播组的含义？）
39. 双栈方法（dual-stack）???